<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mental Health Chatbot</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="navbar">
        <a href="#home">Home</a>
        <a href="#chat">Chat</a>
        <a href="#images">Images</a>
        <a href="#music">Music</a>
        <a href="#support">Support</a>
    </div>
    <section id="home">
        <div class="home-content">
            <h1>Welcome to Our Mental Health Chatbot</h1>
            <p>Mental health is just as important as physical health. Stress, anxiety, and emotional struggles can impact our daily lives. Our chatbot provides support, guidance, and resources to help you navigate your challenges and find peace of mind.</p>
            <p>With AI-powered assistance, you can express your thoughts, get relaxation tips, and receive mental wellness guidance anytime, anywhere.</p>
        </div>
    </section>
    <section id = "chat">
    <div class="container">
        <h1>Mental Health Chatbot</h1>
        <!-- User Preferences Section -->
        <div id="preferences-section">
            <h2>Set Your Preferences</h2>
            <label for="mood">Select Your Mood:</label>
            <select id="mood">
                <option value="happy">Happy</option>
                <option value="sad">Sad</option>
                <option value="anxious">Anxious</option>
                <option value="angry">Angry</option>
                <option value="neutral">Neutral</option>
            </select>

            <label for="tone">Select Chatbot Tone:</label>
            <select id="tone">
                <option value="empathetic">Empathetic</option>
                <option value="motivational">Motivational</option>
                <option value="friendly">Friendly</option>
                <option value="professional">Professional</option>
            </select>

            <button id="save-preferences">Save Preferences</button>
        </div>

        <!-- Chat Window -->
        <div id="chat-window">
            <div id="messages"></div>
            <input type="text" id="user-input" placeholder="Type your message here..." />
            <button id="send-btn">Send</button>
        </div>
    </div>
</section>
<section id="images">
   
    
    <div id="imageContainer">
        <h1>Relax with a Calm Image</h1>
        <button id="loadImage">Get Calm Image</button>
        <img id="calmImage" src="" alt="Calm Image" >
    </div>
</section>

<section id="music">
    <!-- Random Audio Player Section -->
    <h1>Relax with Soothing Music</h1>
    <div id="audioContainer">
        <button id="playButton">Play Random Audio</button>
        <audio id="audioPlayer" controls></audio>
    </div>
</section>
<!-- Support Section -->
<section id="support">
    <div>
    <h1>Support & Resources</h1>

    <!-- Breathing Exercises Grid -->
    <div class="breathing-exercises">
        <!-- 4-7-8 Breathing -->
        <div class="exercise">
            <h2>4-7-8 Breathing Technique</h2>
            <p>A powerful relaxation exercise:</p>
            <ol>
                <li>Inhale deeply through your nose for <b>4 seconds</b>.</li>
                <li>Hold your breath for <b>7 seconds</b>.</li>
                <li>Exhale slowly through your mouth for <b>8 seconds</b>.</li>
                <li>Repeat for <b>4-5 minutes</b>.</li>
            </ol>
            <a href="https://www.youtube.com/watch?v=gz4G31LGyog" target="_blank">Watch Video</a>
        </div>

        <!-- Box Breathing -->
        <div class="exercise">
            <h2>Box Breathing Technique</h2>
            <p>Used by Navy SEALs for focus and calm:</p>
            <ol>
                <li>Inhale through your nose for <b>4 seconds</b>.</li>
                <li>Hold your breath for <b>4 seconds</b>.</li>
                <li>Exhale through your mouth for <b>4 seconds</b>.</li>
                <li>Pause for <b>4 seconds</b> and repeat.</li>
            </ol>
            <a href="https://www.youtube.com/watch?v=tEmt1Znux58" target="_blank">Watch Video</a>
        </div>

        <!-- Alternate Nostril Breathing -->
        <div class="exercise">
            <h2>Alternate Nostril Breathing</h2>
            <p>Balances your mind and body:</p>
            <ol>
                <li>Close your right nostril and inhale through your left.</li>
                <li>Close your left nostril, release the right, and exhale.</li>
                <li>Inhale through your right nostril.</li>
                <li>Close your right nostril, release the left, and exhale.</li>
                <li>Repeat for <b>5 minutes</b>.</li>
            </ol>
            <a href="https://www.youtube.com/watch?v=8VwufJrUhic" target="_blank">Watch Video</a>
        </div>

        <!-- Diaphragmatic Breathing -->
        <div class="exercise">
            <h2>Diaphragmatic (Belly) Breathing</h2>
            <p>Deep breathing for stress relief:</p>
            <ol>
                <li>Place one hand on your chest and the other on your belly.</li>
                <li>Inhale deeply through your nose, letting your belly rise.</li>
                <li>Exhale slowly through your mouth, feeling your belly fall.</li>
                <li>Repeat for <b>5-10 minutes</b>.</li>
            </ol>
            <a href="https://www.youtube.com/watch?v=kgTL5G1ibIo" target="_blank">Watch Video</a>
        </div>
    </div>

    <!-- Emergency Contacts Section -->
    <div class="emergency-contacts">
        <h2>Indian Mental Health Emergency Contacts</h2>
        <ul>
            <li><b>Vandrevala Foundation Helpline:</b> 1860 266 2345 / 9999 666 555</li>
            <li><b>iCall (TISS):</b> +91 9152987821</li>
            <li><b>Sumaitri Suicide Prevention Helpline:</b> +91 011-23389090</li>
            <li><b>AASRA (24/7 Helpline):</b> +91 9820466726</li>
            <li><b>Email Support:</b> aasrahelpline@yahoo.com</li>
        </ul>
    </div>
</div>
</section>
    <script>
        const sendBtn = document.getElementById('send-btn');
        const userInput = document.getElementById('user-input');
        const messages = document.getElementById('messages');
    
        sendBtn.addEventListener('click', () => {
            const message = userInput.value.trim();
            if (!message) return;
    
            // Display user message
            const userMessage = document.createElement('div');
            userMessage.classList.add('message', 'user-message');
            userMessage.innerHTML = `You: ${message} <div class="timestamp">${new Date().toLocaleTimeString()}</div>`;
            messages.appendChild(userMessage);
    
            // Scroll to bottom
            messages.scrollTop = messages.scrollHeight;
    
            // Clear input field
            userInput.value = '';
    
            // Send message to backend
            fetch('/chat', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ message })
            })
            .then(response => response.json())
            .then(data => {
                // Display bot response while preserving spaces and new lines
                const botMessage = document.createElement('div');
                botMessage.classList.add('message', 'bot-message');
            
                // Convert newlines in response to <br> tags
                botMessage.innerHTML = `Bot: ${data.response.replace(/\n/g, '<br>')} 
                    <div class="timestamp">${new Date().toLocaleTimeString()}</div>`;
            
                messages.appendChild(botMessage);
            
                // Scroll to bottom
                messages.scrollTop = messages.scrollHeight;
            })
            
            .catch(err => console.error('Error:', err));
        });
    
        // Save preferences button event listener
        const savePreferencesBtn = document.getElementById('save-preferences');
        savePreferencesBtn.addEventListener('click', () => {
            const mood = document.getElementById('mood').value;
            const tone = document.getElementById('tone').value;
    
            // Send preferences to backend
            fetch('/update_preferences', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ user_id: 'user123', mood, tone })
            })
            .then(response => response.json())
            .then(data => {
                alert(data.message);
            })
            .catch(err => console.error('Error saving preferences:', err));
        });
    
        // Load calming image functionality
        document.getElementById('loadImage').addEventListener('click', () => {
            fetch('/get_calm_image')
                .then(response => response.json())
                .then(data => {
                    const img = document.getElementById('calmImage');
                    img.src = data.image_url;
                    img.style.display = 'block';
                })
                .catch(error => console.error('Error fetching image:', error));
        });
    
        // Array containing the paths of the audio files
        const audioFiles = [
            '/static/audios/1.mp3',
            '/static/audios/2.mp3',
            '/static/audios/3.mp3',
            '/static/audios/4.mp3',
            '/static/audios/5.mp3',
            '/static/audios/6.mp3',
            '/static/audios/7.mp3',
            '/static/audios/8.mp3',
            '/static/audios/9.mp3',
            '/static/audios/10.mp3'
        ];
    
        // Function to play a random audio file
        function playRandomAudio() {
            const randomIndex = Math.floor(Math.random() * audioFiles.length);
            const audioPlayer = document.getElementById('audioPlayer');
            audioPlayer.src = audioFiles[randomIndex];  // Set the source to the random audio file
            audioPlayer.play();  // Play the audio
        }
    
        // Event listener for the button
        document.getElementById('playButton').addEventListener('click', playRandomAudio);
    </script> 
</body>
</html>